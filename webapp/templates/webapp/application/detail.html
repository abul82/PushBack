{% extends 'webapp/application/_base.html' %}


{% block content %}
<a class="btn btn-primary" href="{% url 'webapp:application-list' %}">Applications list</a><br/><br/>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Details</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Notifications</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Clients</a>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
      <br/>
      <div class="alert alert-light">
          <h4 class="alert-heading"><strong>Name</strong> &nbsp;{{ application }}</h4>
          <hr/>
          <p style="word-wrap: break-word;">{{ application.description }}</p>
      </div>
      <br/>
      <div class="alert alert-info" role="alert">
          <h4 class="alert-heading">Application token</h4>
          <p style="word-wrap: break-word;font-weight: bold">{{ application.app_token }}</p>
          <hr/>
          <p class="mb-0">Copy it and use it in you  code.</p>
      </div>

  </div>
  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab"><br/>
      <div class="row">
          <div class="col-md-12">
              <table class="table  table-striped">
                  <thead class="thead-light">
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Send date</th>
                      <th scope="col">Internal UUID</th>
                      <th scope="col">Content</th>
                    </tr>
                  </thead>
                  <tbody>
                  {% if notifications %}
                    {% for notification in notifications %}
                        <tr>
                            {# url 'webapp:application-detail' app.pk #}
                          <th scope="row">{{notification.pk}}</th>
                          <td>{{notification.received_date}}</td>
                          <td>{{notification.internal_uuid | truncatechars:20}}</td>
                          <td>{{notification.content}}</td>
                        </tr>
                    {% endfor %}
                  {% endif %}
                  </tbody>
              </table>
          </div>
      </div>


  </div>
  <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
      <br/>
      <div class="row">
          <div class="col-md-12">
              <table class="table  table-striped">
                  <thead class="thead-light">
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">ID client</th>
                      <th scope="col">Internal UUID</th>
                    </tr>
                  </thead>
                  <tbody>
                  {% if clients %}
                    {% for client in clients %}
                        <tr>
                            {# url 'webapp:application-detail' app.pk #}
                          <th scope="row">{{client.pk}}</th>
                          <td>{{client.client_id}}</td>
                          <td>{{client.current_connection_id |truncatechars:20 }}</td>
                        </tr>
                    {% endfor %}
                  {% endif %}
                  </tbody>
              </table>
          </div>
      </div>
  </div>
</div>



{% endblock content %}


{% block js_script %}
<script>
    $(function () {
        //$('#content').tab('show')
    })
</script>
{% endblock js_script %}